<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Activity Logs - MIKAMATA Admin</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="admin.css">
  <link rel="stylesheet" href="activity-logs.css">
  <style>
    body {
      zoom: 80%;
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <!-- Sidebar -->
    <aside class="admin-sidebar">
      <div class="sidebar-header">
        <img src="../mik/logo.png" alt="MIKAMATA Logo" class="admin-logo">
      </div>
      <nav class="sidebar-nav">
        <ul>
          <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> <span>Dashboard</span></a></li>
          <li><a href="products.html"><i class="fas fa-cubes"></i> <span>Products</span></a></li>
          <li><a href="orders.html"><i class="fas fa-shopping-cart"></i> <span>Orders</span></a></li>
          <li><a href="customers.html"><i class="fas fa-user-group"></i> <span>Users</span></a></li>
          <li><a href="tutorials.html"><i class="fas fa-book-open"></i> <span>Tutorials</span></a></li>
          <li><a href="reviews.html"><i class="fas fa-star"></i> <span>Reviews</span></a></li>
          <li><a href="notifications.html"><i class="fas fa-bell"></i> <span>Notifications</span></a></li>
          <li><a href="activity-logs.html" class="active"><i class="fas fa-clipboard-list"></i> <span>Activity Logs</span></a></li>
        </ul>
        <div class="sidebar-bottom-nav">
          <ul>
            <li><a href="settings.html"><i class="fas fa-cog"></i> <span>Settings</span></a></li>
            <li><a href="#" id="admin-logout-btn"><i class="fas fa-right-from-bracket"></i> <span>Logout</span></a></li>
          </ul>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="admin-main-content">
      <header class="admin-main-header">
        <div>
          <nav class="breadcrumbs as-title">
            <a href="dashboard.html">Dashboard</a>
            <span class="separator">&gt;</span>
            <span>Activity Logs</span>
          </nav>
          <p id="current-date"></p>
        </div>
      </header>

      <!-- Activity Filters -->
      <section class="activity-filters">
        <div class="filters-row">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Search activities by user, action, or description..." id="activity-search">
          </div>
          <div class="filter-group">
            <select id="user-filter" class="filter-select">
              <option value="">All Users</option>
              <option value="admin">Admin Users</option>
              <option value="customer">Customers</option>
              <option value="system">System</option>
            </select>
            <select id="action-filter" class="filter-select">
              <option value="">All Actions</option>
              <option value="login">Login</option>
              <option value="logout">Logout</option>
              <option value="create">Create</option>
              <option value="update">Update</option>
              <option value="delete">Delete</option>
              <option value="view">View</option>
            </select>
            <select id="severity-filter" class="filter-select">
              <option value="">All Severity</option>
              <option value="info">Info</option>
              <option value="warning">Warning</option>
              <option value="error">Error</option>
              <option value="critical">Critical</option>
            </select>
            <select id="date-filter" class="filter-select">
              <option value="">All Time</option>
              <option value="today">Today</option>
              <option value="week">This Week</option>
              <option value="month">This Month</option>
              <option value="custom">Custom Range</option>
            </select>
          </div>
          <div class="action-buttons">
            <button class="btn btn-secondary" id="export-logs">
              <i class="fas fa-download"></i> Export
            </button>
            <button class="btn btn-secondary" id="clear-logs">
              <i class="fas fa-trash"></i> Clear Old Logs
            </button>
            <button class="btn btn-primary" id="refresh-logs">
              <i class="fas fa-refresh"></i> Refresh
            </button>
          </div>
        </div>
      </section>

      <!-- Activity Timeline -->
      <section class="admin-section">
        <div class="section-header">
          <h2>Activity Timeline</h2>
          <div class="timeline-controls">
            <button class="btn btn-outline" id="auto-refresh-toggle">
              <i class="fas fa-sync-alt"></i> Auto Refresh: OFF
            </button>
            <div class="view-toggle">
              <button class="view-btn active" data-view="timeline">
                <i class="fas fa-stream"></i>
              </button>
              <button class="view-btn" data-view="table">
                <i class="fas fa-table"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Timeline View -->
        <div class="activity-timeline" id="timeline-view">
          <div class="timeline-container" id="timeline-container">
            <!-- Logs will be dynamically inserted here -->
          </div>
        </div>

        <!-- Table View -->
        <div class="table-responsive" id="table-view" style="display: none;">
          <table class="activity-table">
            <thead>
              <tr>
                <th><input type="checkbox" id="select-all-activities"></th>
                <th>Time</th>
                <th>User</th>
                <th>Action</th>
                <th>Description</th>
                <th>IP Address</th>
                <th>Severity</th>
                <th>Details</th>
              </tr>
            </thead>
            <tbody id="activity-table-body">
              <!-- Table rows will be populated here -->
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <div class="pagination-wrapper">
          <div class="pagination-info">
            Showing 1-20 of 15,847 activities
          </div>
          <div class="pagination">
            <button class="pagination-btn" disabled><i class="fas fa-chevron-left"></i></button>
            <button class="pagination-btn active">1</button>
            <button class="pagination-btn">2</button>
            <button class="pagination-btn">3</button>
            <span class="pagination-dots">...</span>
            <button class="pagination-btn">793</button>
            <button class="pagination-btn"><i class="fas fa-chevron-right"></i></button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Activity Details Modal -->
  <div id="activity-detail-modal" class="modal">
    <div class="modal-content large">
      <div class="modal-header">
        <h3>Activity Details</h3>
        <span class="close" onclick="closeActivityDetailModal()">&times;</span>
      </div>
      <div class="modal-body">
        <div class="activity-detail-grid">
          <!-- Basic Information -->
          <div class="detail-section">
            <h4><i class="fas fa-info-circle"></i> Basic Information</h4>
            <div class="detail-row"><strong>Activity ID:</strong> <span id="modal-activity-id">ACT-2024-001</span></div>
            <div class="detail-row"><strong>Timestamp:</strong> <span id="modal-timestamp">Dec 15, 2024 2:45 PM</span></div>
            <div class="detail-row"><strong>Action:</strong> <span id="modal-action">User Login</span></div>
            <div class="detail-row"><strong>Severity:</strong> <span id="modal-severity" class="severity-badge info">Info</span></div>
          </div>

          <!-- User Information -->
          <div class="detail-section">
            <h4><i class="fas fa-user"></i> User Information</h4>
            <div class="detail-row"><strong>User:</strong> <span id="modal-user">Admin User</span></div>
            <div class="detail-row"><strong>User ID:</strong> <span id="modal-user-id">USR-001</span></div>
            <div class="detail-row"><strong>Role:</strong> <span id="modal-user-role">Administrator</span></div>
            <div class="detail-row"><strong>Session ID:</strong> <span id="modal-session-id">sess_abc123</span></div>
          </div>

          <!-- Technical Details -->
          <div class="detail-section">
            <h4><i class="fas fa-server"></i> Technical Details</h4>
            <div class="detail-row"><strong>IP Address:</strong> <span id="modal-ip">192.168.1.100</span></div>
            <div class="detail-row"><strong>User Agent:</strong> <span id="modal-user-agent">Mozilla/5.0 (Windows NT 10.0; Win64; x64)</span></div>
            <div class="detail-row"><strong>Location:</strong> <span id="modal-location">Manila, Philippines</span></div>
            <div class="detail-row"><strong>Device:</strong> <span id="modal-device">Desktop - Windows</span></div>
          </div>

          <!-- Activity Description -->
          <div class="detail-section full-width">
            <h4><i class="fas fa-file-alt"></i> Description</h4>
            <div class="activity-description-full">
              <p id="modal-description">User successfully logged into the admin panel using valid credentials. Login attempt was successful on the first try.</p>
            </div>
          </div>

          <!-- Additional Data -->
          <div class="detail-section full-width">
            <h4><i class="fas fa-database"></i> Additional Data</h4>
            <div class="activity-data">
              <pre id="modal-additional-data">{
  "login_method": "email_password",
  "two_factor_enabled": true,
  "previous_login": "2024-12-14 18:30:00",
  "login_duration": "2.3s",
  "security_score": 95
}</pre>
            </div>
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn btn-secondary" onclick="closeActivityDetailModal()">Close</button>
          <button class="btn btn-outline" id="export-activity-btn">Export Activity</button>
          <button class="btn btn-primary" id="flag-activity-btn">Flag for Review</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Clear Logs Modal -->
  <div id="clear-logs-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Clear Activity Logs</h3>
        <span class="close" onclick="closeClearLogsModal()">&times;</span>
      </div>
      <div class="modal-body">
        <div class="warning-message">
          <i class="fas fa-exclamation-triangle"></i>
          <p>This action will permanently delete old activity logs. This cannot be undone.</p>
        </div>
        <div class="clear-options">
          <div class="form-group">
            <label for="clear-period">Clear logs older than:</label>
            <select id="clear-period" class="form-select">
              <option value="30">30 days</option>
              <option value="60">60 days</option>
              <option value="90">90 days</option>
              <option value="180">6 months</option>
              <option value="365">1 year</option>
            </select>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="keep-critical">
              Keep critical and error logs regardless of age
            </label>
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" onclick="closeClearLogsModal()">Cancel</button>
          <button class="btn btn-danger" id="confirm-clear-logs">Clear Logs</button>
        </div>
      </div>
    </div>
  </div>

  <script src="activity-logs.js"></script>
  <script src="admin.js"></script>
</body>
</html>
